{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyRequests=()=>{const[requests,setRequests]=useState([]);const[loading,setLoading]=useState(true);const userId=localStorage.getItem('userId');useEffect(()=>{const fetchRequests=async()=>{try{const response=await fetch(`http://localhost:5000/api/my-requests/${userId}`);const data=await response.json();if(data.success){// Check if the response is successful\nsetRequests(data.helpRequests);// Update to use helpRequests\n}else{alert('‚ö†Ô∏è No help requests found.');}}catch(error){console.error('Error fetching help requests:',error);alert('‚ö†Ô∏è Something went wrong. Please try again later.');}finally{setLoading(false);}};if(userId){fetchRequests();}else{alert('üîí User not logged in.');setLoading(false);}},[userId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",style:{maxWidth:'700px'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"\\uD83D\\uDCCB My Help Requests\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"\\u23F3 Loading...\"}):requests.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"list-group shadow\",children:requests.map(req=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item mb-3 rounded\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83C\\uDD94 Request ID:\"}),\" \",req.id,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCCD Location:\"}),\" \",req.location||'Not specified',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDEE0 Issue:\"}),\" \",req.details,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCCA Status:\"}),\" \",req.status]},req.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDE41 You have not submitted any help requests yet.\"})]});};export default MyRequests;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","MyRequests","requests","setRequests","loading","setLoading","userId","localStorage","getItem","fetchRequests","response","fetch","data","json","success","helpRequests","alert","error","console","className","style","maxWidth","children","length","map","req","id","location","details","status"],"sources":["D:/vehicle-breakdown-assistance/vehicle-frontend/src/components/MyRequests.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nconst MyRequests = () => {\r\n  const [requests, setRequests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const userId = localStorage.getItem('userId');\r\n\r\n  useEffect(() => {\r\n    const fetchRequests = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:5000/api/my-requests/${userId}`);\r\n        const data = await response.json();\r\n        \r\n        if (data.success) {  // Check if the response is successful\r\n          setRequests(data.helpRequests);  // Update to use helpRequests\r\n        } else {\r\n          alert('‚ö†Ô∏è No help requests found.');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching help requests:', error);\r\n        alert('‚ö†Ô∏è Something went wrong. Please try again later.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      fetchRequests();\r\n    } else {\r\n      alert('üîí User not logged in.');\r\n      setLoading(false);\r\n    }\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div className=\"container mt-5\" style={{ maxWidth: '700px' }}>\r\n      <h2 className=\"mb-4\">üìã My Help Requests</h2>\r\n      {loading ? (\r\n        <p>‚è≥ Loading...</p>\r\n      ) : requests.length > 0 ? (\r\n        <ul className=\"list-group shadow\">\r\n          {requests.map((req) => (\r\n            <li key={req.id} className=\"list-group-item mb-3 rounded\">\r\n              <strong>üÜî Request ID:</strong> {req.id} <br />\r\n              <strong>üìç Location:</strong> {req.location || 'Not specified'}<br />\r\n              <strong>üõ† Issue:</strong> {req.details}<br />\r\n              <strong>üìä Status:</strong> {req.status}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>üôÅ You have not submitted any help requests yet.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyRequests;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGP,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACQ,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAE5C,KAAM,CAAAU,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAE7Cb,SAAS,CAAC,IAAM,CACd,KAAM,CAAAc,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,yCAAyCL,MAAM,EAAE,CAAC,CAC/E,KAAM,CAAAM,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAElC,GAAID,IAAI,CAACE,OAAO,CAAE,CAAG;AACnBX,WAAW,CAACS,IAAI,CAACG,YAAY,CAAC,CAAG;AACnC,CAAC,IAAM,CACLC,KAAK,CAAC,4BAA4B,CAAC,CACrC,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrDD,KAAK,CAAC,kDAAkD,CAAC,CAC3D,CAAC,OAAS,CACRX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAIC,MAAM,CAAE,CACVG,aAAa,CAAC,CAAC,CACjB,CAAC,IAAM,CACLO,KAAK,CAAC,wBAAwB,CAAC,CAC/BX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACC,MAAM,CAAC,CAAC,CAEZ,mBACEN,KAAA,QAAKmB,SAAS,CAAC,gBAAgB,CAACC,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAQ,CAAE,CAAAC,QAAA,eAC3DxB,IAAA,OAAIqB,SAAS,CAAC,MAAM,CAAAG,QAAA,CAAC,+BAAmB,CAAI,CAAC,CAC5ClB,OAAO,cACNN,IAAA,MAAAwB,QAAA,CAAG,mBAAY,CAAG,CAAC,CACjBpB,QAAQ,CAACqB,MAAM,CAAG,CAAC,cACrBzB,IAAA,OAAIqB,SAAS,CAAC,mBAAmB,CAAAG,QAAA,CAC9BpB,QAAQ,CAACsB,GAAG,CAAEC,GAAG,eAChBzB,KAAA,OAAiBmB,SAAS,CAAC,8BAA8B,CAAAG,QAAA,eACvDxB,IAAA,WAAAwB,QAAA,CAAQ,0BAAc,CAAQ,CAAC,IAAC,CAACG,GAAG,CAACC,EAAE,CAAC,GAAC,cAAA5B,IAAA,QAAK,CAAC,cAC/CA,IAAA,WAAAwB,QAAA,CAAQ,wBAAY,CAAQ,CAAC,IAAC,CAACG,GAAG,CAACE,QAAQ,EAAI,eAAe,cAAC7B,IAAA,QAAK,CAAC,cACrEA,IAAA,WAAAwB,QAAA,CAAQ,qBAAS,CAAQ,CAAC,IAAC,CAACG,GAAG,CAACG,OAAO,cAAC9B,IAAA,QAAK,CAAC,cAC9CA,IAAA,WAAAwB,QAAA,CAAQ,sBAAU,CAAQ,CAAC,IAAC,CAACG,GAAG,CAACI,MAAM,GAJhCJ,GAAG,CAACC,EAKT,CACL,CAAC,CACA,CAAC,cAEL5B,IAAA,MAAAwB,QAAA,CAAG,4DAAgD,CAAG,CACvD,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAArB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}