{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserDashboard=()=>{const navigate=useNavigate();const userEmail=localStorage.getItem('userEmail');const userId=localStorage.getItem('userId');const[helpRequests,setHelpRequests]=useState([]);useEffect(()=>{if(userId){fetch(`http://localhost:5000/api/my-requests/${userId}`).then(response=>response.json()).then(data=>{if(data.success){setHelpRequests(data.helpRequests);}else{console.error('Error:',data.message);}}).catch(error=>console.error('Error fetching help requests:',error));}},[userId]);const handleLogout=()=>{localStorage.clear();navigate('/');};return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dashboard-title\",children:\"\\uD83D\\uDE97 User Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"dashboard-text\",children:[\"Welcome\",userEmail?`, ${userEmail}`:'',\"! Ready to request assistance?\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/request-help\",className:\"dashboard-btn primary\",children:\"Request Help\"}),/*#__PURE__*/_jsx(Link,{to:\"/my-requests\",className:\"dashboard-btn primary\",children:\"My Requests\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"dashboard-btn secondary\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-requests-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCB My Help Requests\"}),helpRequests.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"help-request-list\",children:helpRequests.map(request=>/*#__PURE__*/_jsxs(\"li\",{className:\"help-request-item\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",request.status||'Pending']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Details:\"}),\" \",request.details]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created:\"}),\" \",new Date(request.created_at).toLocaleString()]}),request.provider_name&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Provider Name:\"}),\" \",request.provider_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Provider Email:\"}),\" \",request.provider_email]})]})]},request.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No help requests found.\"})]})]})});};export default UserDashboard;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserDashboard","navigate","userEmail","localStorage","getItem","userId","helpRequests","setHelpRequests","fetch","then","response","json","data","success","console","error","message","catch","handleLogout","clear","className","children","to","onClick","length","map","request","status","details","Date","created_at","toLocaleString","provider_name","provider_email","id"],"sources":["D:/vehicle-breakdown-assistance/vehicle-frontend/src/components/Dashboard/UserDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport './Dashboard.css';\r\n\r\nconst UserDashboard = () => {\r\n  const navigate = useNavigate();\r\n  const userEmail = localStorage.getItem('userEmail');\r\n  const userId = localStorage.getItem('userId');\r\n  const [helpRequests, setHelpRequests] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      fetch(`http://localhost:5000/api/my-requests/${userId}`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          if (data.success) {\r\n            setHelpRequests(data.helpRequests);\r\n          } else {\r\n            console.error('Error:', data.message);\r\n          }\r\n        })\r\n        .catch(error => console.error('Error fetching help requests:', error));\r\n    }\r\n  }, [userId]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-wrapper\">\r\n      <div className=\"dashboard-card\">\r\n        <h2 className=\"dashboard-title\">ðŸš— User Dashboard</h2>\r\n        <p className=\"dashboard-text\">\r\n          Welcome{userEmail ? `, ${userEmail}` : ''}! Ready to request assistance?\r\n        </p>\r\n\r\n        <div className=\"dashboard-buttons\">\r\n          <Link to=\"/request-help\" className=\"dashboard-btn primary\">Request Help</Link>\r\n          <Link to=\"/my-requests\" className=\"dashboard-btn primary\">My Requests</Link>\r\n          <button onClick={handleLogout} className=\"dashboard-btn secondary\">Logout</button>\r\n        </div>\r\n\r\n        <div className=\"help-requests-section\">\r\n          <h3>ðŸ“‹ My Help Requests</h3>\r\n          {helpRequests.length > 0 ? (\r\n            <ul className=\"help-request-list\">\r\n              {helpRequests.map((request) => (\r\n                <li key={request.id} className=\"help-request-item\">\r\n                  <p><strong>Status:</strong> {request.status || 'Pending'}</p>\r\n                  <p><strong>Details:</strong> {request.details}</p>\r\n                  <p><strong>Created:</strong> {new Date(request.created_at).toLocaleString()}</p>\r\n                  {request.provider_name && (\r\n                    <>\r\n                      <p><strong>Provider Name:</strong> {request.provider_name}</p>\r\n                      <p><strong>Provider Email:</strong> {request.provider_email}</p>\r\n                    </>\r\n                  )}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <p>No help requests found.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}